

{% schema %}
{
  "name": "Product Recommendations",
  "settings": [
    {
      "type": "text",
      "label": "Your Text",
      "id": "text"
    }
  ],
  "blocks": [
    {
      "type": "collection_block",
      "name": "Collection Block",
      "settings": [
        {
          "type": "collection",
          "label": "Collection",
          "id": "collection"
        }
      ]
    }
  ],
  "presets": [
    {
      "category": "custom",
      "name": "Product Recommendations"
    }
  ]
}
{% endschema %}

<div class="wholediv">
  <p>{{section.settings.text}}</p>
  {% for block in section.blocks %}
    <div class="image-block">
      <a href="#" class="open-modal-btn" data-modal-id="PopupModal-{{ block.id }}">
        <div class="image-container">
        {% if block.settings.collection.image %}
          <img src="{{ block.settings.collection.image | img_url: 'medium' }}" alt="Image" class="open-modal-btn">
        {% endif %}
        <div class="overlay">
          <div class="overlay-text">{{ block.settings.collection.title }}</div>
        </div>
        </div>
      </a>
    </div>
  {% endfor %}
</div>

<div class="overlay-bg" id="overlay-bg">

{% for block in section.blocks %}
  <div id="PopupModal-{{ block.id }}" class="modal">
    <div class="modal-content">
      <span class="close">&times;</span>
      <div class="description">
        <p class="modal-description">{{ block.settings.collection.description }}</p>
      </div>
      <div class="product-row">
        {% for product in block.settings.collection.products %}
          <div class="product-item">
            <a href="{{ product.url }}">
              <div class="product-image">
                <img src="{{ product.featured_image | img_url: 'master' }}" alt="{{ product.title }}">
              </div>
              <div class="product-info">
                <h3>{{ product.title }}</h3>
                <p>{{ product.price | money }}</p>
              </div>
            </a>
          </div>
        {% endfor %}
      </div>
    </div>
  </div>

{% endfor %}
</div>

<!-- <script>
  document.addEventListener("DOMContentLoaded", function () {
    const openModalButtons = document.querySelectorAll('.open-modal-btn');
    const overlayBg = document.getElementById('overlay-bg'); 
    const body = document.body;

    openModalButtons.forEach(button => {
      button.addEventListener('click', (event) => {
        const modalId = button.getAttribute('data-modal-id');
        const modal = document.getElementById(modalId);

        if (modal) {
          modal.style.display = 'block';
          overlayBg.style.display = 'block'; 
          body.style.overflow = 'hidden'; 
          const closeButton = modal.querySelector('.close');
          if (closeButton) {
            closeButton.addEventListener('click', () => {
              modal.style.display = 'none';
              overlayBg.style.display = 'none'; 
              body.style.overflow = 'auto'; 
            });
          }
        }
      });
    });
  });
</script> -->
<style>
  
  .overlay-bg {
    display: none;
    position: fixed;
    z-index: 999; 
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
  }
  .wholediv {
    display: flex;
    flex-wrap: wrap;
  }

  
  .image-block {
  max-width: 479px; 
  margin: 0 10px;
  align-items: center;
  margin: 10px auto; 
}


  .modal {
    display: none;
    position: fixed;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
  }

  .modal-content {
    background-color: white;
    margin:0 auto;
    border: 1px solid #888;
    width: 90%;
    display: flex;
    flex-direction: column; 
    position: relative;
  }

  .close {
    position: absolute;
    top: 0;
    right: 0;
    padding: 10px;
    cursor: pointer;
  }

 
  .product-item {
  display: flex;
  align-items: center;
  width: 100%;
  padding: 10px;
  margin-top: 10px;
}


  .product-item img {
    width: 100px;
    margin-right: 10px;
  }

  .product-info {
    flex: 1; 
  }

  .modal-content img {
    max-width: 100%;
    height: auto; 
    width:233px;
  }

  .open-modal-btn {
    width: 479px;
    
  }

  .description {
    width: 100%;
    text-align: center;
    margin-bottom: 10px;
  }
  
.image-container {
  position: relative;
  overflow: hidden;
}

.overlay {
  position: absolute;
  top: 0;
  left: 0;
  width: 479px;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  opacity: 0;
  transition: opacity 0.3s ease-in-out;
}

.overlay-text {
  color:#f7c6a8;
  font-family: 'Cormorant', serif;
  font-size: 45px;
  text-align: center;
 
}

.image-block:hover .overlay {
  opacity: 1; 
  background: rgb(2, 39, 48, 0.6);
}
.product-row {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    margin-top: 20px;
  }

  .product-item {
    /* / width: calc(33.33% - 20px);  / */
    width: calc(24.33% - 53px);
    
    margin: 0 auto;
  }

  .product-image {
    width:400px;
  }
  a{
    text-decoration: none;
    text-decoration-color: black;
  }

</style>
